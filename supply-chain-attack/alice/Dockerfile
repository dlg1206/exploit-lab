# file: Dockerfile
# description: Create working enviroment for developer alice
#
# @author Derek Garcia
FROM node:22.13.1-alpine3.21
ENV MOCK_REGISTRY="mock-npm:4873"
ENV USER_CREATED=0
# utils for setting up registery
RUN apk add curl jq
# copy malcious npm package
RUN adduser -D -h /home/alice alice
WORKDIR /home/alice

COPY --chown=alice:alice --chmod=775 setup.sh /setup.sh

USER alice
ENTRYPOINT ["ash", "-c", ". /setup.sh; ash"]
